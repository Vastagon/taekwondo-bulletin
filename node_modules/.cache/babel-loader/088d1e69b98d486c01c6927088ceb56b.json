{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n/**\n * Assign a value to a nested object\n * @function putNestedValue\n * @param params the parent object - this argument will be modified!\n * @param key key in the form nested[innerkey]\n * @param value the value to assign\n * @return the modified params object\n */\n\n\nvar url = require('url');\n\nvar extend = require(\"lodash/extend\");\n\nvar isObject = require(\"lodash/isObject\");\n\nvar isString = require(\"lodash/isString\");\n\nvar isUndefined = require(\"lodash/isUndefined\");\n\nvar isEmpty = require(\"lodash/isEmpty\");\n\nvar entries = require('./utils/entries');\n\nvar cloudinary_config = void 0;\n/**\n * Sets a value in an object using a nested key\n * @param {object} params The object to assign the value in.\n * @param {string} key The key of the value. A period is used to denote inner keys.\n * @param {*} value The value to set.\n * @returns {object} The params argument.\n * @example\n *     let o = {foo: {bar: 1}};\n *     putNestedValue(o, 'foo.bar', 2); // {foo: {bar: 2}}\n *     putNestedValue(o, 'foo.inner.key', 'this creates an inner object');\n *     // {{foo: {bar: 2}, inner: {key: 'this creates an inner object'}}}\n */\n\nfunction putNestedValue(params, key, value) {\n  var chain = key.split(/[\\[\\]]+/).filter(function (i) {\n    return i.length;\n  });\n  var outer = params;\n  var lastKey = chain.pop();\n\n  for (var j = 0; j < chain.length; j++) {\n    var innerKey = chain[j];\n    var inner = outer[innerKey];\n\n    if (inner == null) {\n      inner = {};\n      outer[innerKey] = inner;\n    }\n\n    outer = inner;\n  }\n\n  outer[lastKey] = value;\n  return params;\n}\n\nfunction parseCloudinaryConfigFromEnvURL(ENV_STR) {\n  var conf = {};\n  var uri = url.parse(ENV_STR, true);\n\n  if (uri.protocol === 'cloudinary:') {\n    conf = Object.assign({}, conf, {\n      cloud_name: uri.host,\n      api_key: uri.auth && uri.auth.split(\":\")[0],\n      api_secret: uri.auth && uri.auth.split(\":\")[1],\n      private_cdn: uri.pathname != null,\n      secure_distribution: uri.pathname && uri.pathname.substring(1)\n    });\n  } else if (uri.protocol === 'account:') {\n    conf = Object.assign({}, conf, {\n      account_id: uri.host,\n      provisioning_api_key: uri.auth && uri.auth.split(\":\")[0],\n      provisioning_api_secret: uri.auth && uri.auth.split(\":\")[1]\n    });\n  }\n\n  return conf;\n}\n\nfunction extendCloudinaryConfigFromQuery(ENV_URL) {\n  var confToExtend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var uri = url.parse(ENV_URL, true);\n\n  if (uri.query != null) {\n    entries(uri.query).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      return putNestedValue(confToExtend, key, value);\n    });\n  }\n}\n\nfunction extendCloudinaryConfig(parsedConfig) {\n  var confToExtend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  entries(parsedConfig).forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    if (value !== undefined) {\n      confToExtend[key] = value;\n    }\n  });\n  return confToExtend;\n}\n\nmodule.exports = function (new_config, new_value) {\n  if (cloudinary_config == null || new_config === true) {\n    if (cloudinary_config == null) {\n      cloudinary_config = {};\n    } else {\n      Object.keys(cloudinary_config).forEach(function (key) {\n        return delete cloudinary_config[key];\n      });\n    }\n\n    var CLOUDINARY_ENV_URL = process.env.CLOUDINARY_URL;\n    var CLOUDINARY_ENV_ACCOUNT_URL = process.env.CLOUDINARY_ACCOUNT_URL;\n    var CLOUDINARY_API_PROXY = process.env.CLOUDINARY_API_PROXY;\n\n    if (CLOUDINARY_ENV_URL && !CLOUDINARY_ENV_URL.toLowerCase().startsWith('cloudinary://')) {\n      throw new Error(\"Invalid CLOUDINARY_URL protocol. URL should begin with 'cloudinary://'\");\n    }\n\n    if (CLOUDINARY_ENV_ACCOUNT_URL && !CLOUDINARY_ENV_ACCOUNT_URL.toLowerCase().startsWith('account://')) {\n      throw new Error(\"Invalid CLOUDINARY_ACCOUNT_URL protocol. URL should begin with 'account://'\");\n    }\n\n    if (!isEmpty(CLOUDINARY_API_PROXY)) {\n      extendCloudinaryConfig({\n        api_proxy: CLOUDINARY_API_PROXY\n      }, cloudinary_config);\n    }\n\n    [CLOUDINARY_ENV_URL, CLOUDINARY_ENV_ACCOUNT_URL].forEach(function (ENV_URL) {\n      if (ENV_URL) {\n        var parsedConfig = parseCloudinaryConfigFromEnvURL(ENV_URL);\n        extendCloudinaryConfig(parsedConfig, cloudinary_config); // Provide Query support in ENV url cloudinary://key:secret@test123?foo[bar]=value\n        // expect(cloudinary_config.foo.bar).to.eql('value')\n\n        extendCloudinaryConfigFromQuery(ENV_URL, cloudinary_config);\n      }\n    });\n  }\n\n  if (!isUndefined(new_value)) {\n    cloudinary_config[new_config] = new_value;\n  } else if (isString(new_config)) {\n    return cloudinary_config[new_config];\n  } else if (isObject(new_config)) {\n    extend(cloudinary_config, new_config);\n  }\n\n  return cloudinary_config;\n};","map":{"version":3,"sources":["/home/jacob/Code/taekwondo-bulletin/node_modules/cloudinary/lib-es5/config.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","url","require","extend","isObject","isString","isUndefined","isEmpty","entries","cloudinary_config","putNestedValue","params","key","chain","split","filter","outer","lastKey","pop","j","innerKey","inner","parseCloudinaryConfigFromEnvURL","ENV_STR","conf","uri","parse","protocol","assign","cloud_name","host","api_key","auth","api_secret","private_cdn","pathname","secure_distribution","substring","account_id","provisioning_api_key","provisioning_api_secret","extendCloudinaryConfigFromQuery","ENV_URL","confToExtend","arguments","query","forEach","_ref","_ref2","extendCloudinaryConfig","parsedConfig","_ref3","_ref4","module","exports","new_config","new_value","keys","CLOUDINARY_ENV_URL","process","env","CLOUDINARY_URL","CLOUDINARY_ENV_ACCOUNT_URL","CLOUDINARY_ACCOUNT_URL","CLOUDINARY_API_PROXY","toLowerCase","startsWith","Error","api_proxy"],"mappings":"AAAA;;AAEA,IAAIA,cAAc,GAAG,YAAY;AAAE,WAASC,aAAT,CAAuBC,GAAvB,EAA4BC,CAA5B,EAA+B;AAAE,QAAIC,IAAI,GAAG,EAAX;AAAe,QAAIC,EAAE,GAAG,IAAT;AAAe,QAAIC,EAAE,GAAG,KAAT;AAAgB,QAAIC,EAAE,GAAGC,SAAT;;AAAoB,QAAI;AAAE,WAAK,IAAIC,EAAE,GAAGP,GAAG,CAACQ,MAAM,CAACC,QAAR,CAAH,EAAT,EAAiCC,EAAtC,EAA0C,EAAEP,EAAE,GAAG,CAACO,EAAE,GAAGH,EAAE,CAACI,IAAH,EAAN,EAAiBC,IAAxB,CAA1C,EAAyET,EAAE,GAAG,IAA9E,EAAoF;AAAED,QAAAA,IAAI,CAACW,IAAL,CAAUH,EAAE,CAACI,KAAb;;AAAqB,YAAIb,CAAC,IAAIC,IAAI,CAACa,MAAL,KAAgBd,CAAzB,EAA4B;AAAQ;AAAE,KAAvJ,CAAwJ,OAAOe,GAAP,EAAY;AAAEZ,MAAAA,EAAE,GAAG,IAAL;AAAWC,MAAAA,EAAE,GAAGW,GAAL;AAAW,KAA5L,SAAqM;AAAE,UAAI;AAAE,YAAI,CAACb,EAAD,IAAOI,EAAE,CAAC,QAAD,CAAb,EAAyBA,EAAE,CAAC,QAAD,CAAF;AAAiB,OAAhD,SAAyD;AAAE,YAAIH,EAAJ,EAAQ,MAAMC,EAAN;AAAW;AAAE;;AAAC,WAAOH,IAAP;AAAc;;AAAC,SAAO,UAAUF,GAAV,EAAeC,CAAf,EAAkB;AAAE,QAAIgB,KAAK,CAACC,OAAN,CAAclB,GAAd,CAAJ,EAAwB;AAAE,aAAOA,GAAP;AAAa,KAAvC,MAA6C,IAAIQ,MAAM,CAACC,QAAP,IAAmBU,MAAM,CAACnB,GAAD,CAA7B,EAAoC;AAAE,aAAOD,aAAa,CAACC,GAAD,EAAMC,CAAN,CAApB;AAA+B,KAArE,MAA2E;AAAE,YAAM,IAAImB,SAAJ,CAAc,sDAAd,CAAN;AAA8E;AAAE,GAArO;AAAwO,CAAhoB,EAArB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,eAAD,CAApB;;AACA,IAAIE,QAAQ,GAAGF,OAAO,CAAC,iBAAD,CAAtB;;AACA,IAAIG,QAAQ,GAAGH,OAAO,CAAC,iBAAD,CAAtB;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,oBAAD,CAAzB;;AACA,IAAIK,OAAO,GAAGL,OAAO,CAAC,gBAAD,CAArB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAAC,iBAAD,CAArB;;AAEA,IAAIO,iBAAiB,GAAG,KAAK,CAA7B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,cAAT,CAAwBC,MAAxB,EAAgCC,GAAhC,EAAqClB,KAArC,EAA4C;AAC1C,MAAImB,KAAK,GAAGD,GAAG,CAACE,KAAJ,CAAU,SAAV,EAAqBC,MAArB,CAA4B,UAAUlC,CAAV,EAAa;AACnD,WAAOA,CAAC,CAACc,MAAT;AACD,GAFW,CAAZ;AAGA,MAAIqB,KAAK,GAAGL,MAAZ;AACA,MAAIM,OAAO,GAAGJ,KAAK,CAACK,GAAN,EAAd;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,KAAK,CAAClB,MAA1B,EAAkCwB,CAAC,EAAnC,EAAuC;AACrC,QAAIC,QAAQ,GAAGP,KAAK,CAACM,CAAD,CAApB;AACA,QAAIE,KAAK,GAAGL,KAAK,CAACI,QAAD,CAAjB;;AACA,QAAIC,KAAK,IAAI,IAAb,EAAmB;AACjBA,MAAAA,KAAK,GAAG,EAAR;AACAL,MAAAA,KAAK,CAACI,QAAD,CAAL,GAAkBC,KAAlB;AACD;;AACDL,IAAAA,KAAK,GAAGK,KAAR;AACD;;AACDL,EAAAA,KAAK,CAACC,OAAD,CAAL,GAAiBvB,KAAjB;AACA,SAAOiB,MAAP;AACD;;AAED,SAASW,+BAAT,CAAyCC,OAAzC,EAAkD;AAChD,MAAIC,IAAI,GAAG,EAAX;AAEA,MAAIC,GAAG,GAAGxB,GAAG,CAACyB,KAAJ,CAAUH,OAAV,EAAmB,IAAnB,CAAV;;AAEA,MAAIE,GAAG,CAACE,QAAJ,KAAiB,aAArB,EAAoC;AAClCH,IAAAA,IAAI,GAAGzB,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkBJ,IAAlB,EAAwB;AAC7BK,MAAAA,UAAU,EAAEJ,GAAG,CAACK,IADa;AAE7BC,MAAAA,OAAO,EAAEN,GAAG,CAACO,IAAJ,IAAYP,GAAG,CAACO,IAAJ,CAASlB,KAAT,CAAe,GAAf,EAAoB,CAApB,CAFQ;AAG7BmB,MAAAA,UAAU,EAAER,GAAG,CAACO,IAAJ,IAAYP,GAAG,CAACO,IAAJ,CAASlB,KAAT,CAAe,GAAf,EAAoB,CAApB,CAHK;AAI7BoB,MAAAA,WAAW,EAAET,GAAG,CAACU,QAAJ,IAAgB,IAJA;AAK7BC,MAAAA,mBAAmB,EAAEX,GAAG,CAACU,QAAJ,IAAgBV,GAAG,CAACU,QAAJ,CAAaE,SAAb,CAAuB,CAAvB;AALR,KAAxB,CAAP;AAOD,GARD,MAQO,IAAIZ,GAAG,CAACE,QAAJ,KAAiB,UAArB,EAAiC;AACtCH,IAAAA,IAAI,GAAGzB,MAAM,CAAC6B,MAAP,CAAc,EAAd,EAAkBJ,IAAlB,EAAwB;AAC7Bc,MAAAA,UAAU,EAAEb,GAAG,CAACK,IADa;AAE7BS,MAAAA,oBAAoB,EAAEd,GAAG,CAACO,IAAJ,IAAYP,GAAG,CAACO,IAAJ,CAASlB,KAAT,CAAe,GAAf,EAAoB,CAApB,CAFL;AAG7B0B,MAAAA,uBAAuB,EAAEf,GAAG,CAACO,IAAJ,IAAYP,GAAG,CAACO,IAAJ,CAASlB,KAAT,CAAe,GAAf,EAAoB,CAApB;AAHR,KAAxB,CAAP;AAKD;;AAED,SAAOU,IAAP;AACD;;AAED,SAASiB,+BAAT,CAAyCC,OAAzC,EAAkD;AAChD,MAAIC,YAAY,GAAGC,SAAS,CAACjD,MAAV,GAAmB,CAAnB,IAAwBiD,SAAS,CAAC,CAAD,CAAT,KAAiB1D,SAAzC,GAAqD0D,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAvF;AAEA,MAAInB,GAAG,GAAGxB,GAAG,CAACyB,KAAJ,CAAUgB,OAAV,EAAmB,IAAnB,CAAV;;AACA,MAAIjB,GAAG,CAACoB,KAAJ,IAAa,IAAjB,EAAuB;AACrBrC,IAAAA,OAAO,CAACiB,GAAG,CAACoB,KAAL,CAAP,CAAmBC,OAAnB,CAA2B,UAAUC,IAAV,EAAgB;AACzC,UAAIC,KAAK,GAAGtE,cAAc,CAACqE,IAAD,EAAO,CAAP,CAA1B;AAAA,UACInC,GAAG,GAAGoC,KAAK,CAAC,CAAD,CADf;AAAA,UAEItD,KAAK,GAAGsD,KAAK,CAAC,CAAD,CAFjB;;AAIA,aAAOtC,cAAc,CAACiC,YAAD,EAAe/B,GAAf,EAAoBlB,KAApB,CAArB;AACD,KAND;AAOD;AACF;;AAED,SAASuD,sBAAT,CAAgCC,YAAhC,EAA8C;AAC5C,MAAIP,YAAY,GAAGC,SAAS,CAACjD,MAAV,GAAmB,CAAnB,IAAwBiD,SAAS,CAAC,CAAD,CAAT,KAAiB1D,SAAzC,GAAqD0D,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAvF;AAEApC,EAAAA,OAAO,CAAC0C,YAAD,CAAP,CAAsBJ,OAAtB,CAA8B,UAAUK,KAAV,EAAiB;AAC7C,QAAIC,KAAK,GAAG1E,cAAc,CAACyE,KAAD,EAAQ,CAAR,CAA1B;AAAA,QACIvC,GAAG,GAAGwC,KAAK,CAAC,CAAD,CADf;AAAA,QAEI1D,KAAK,GAAG0D,KAAK,CAAC,CAAD,CAFjB;;AAIA,QAAI1D,KAAK,KAAKR,SAAd,EAAyB;AACvByD,MAAAA,YAAY,CAAC/B,GAAD,CAAZ,GAAoBlB,KAApB;AACD;AACF,GARD;AAUA,SAAOiD,YAAP;AACD;;AAEDU,MAAM,CAACC,OAAP,GAAiB,UAAUC,UAAV,EAAsBC,SAAtB,EAAiC;AAChD,MAAI/C,iBAAiB,IAAI,IAArB,IAA6B8C,UAAU,KAAK,IAAhD,EAAsD;AACpD,QAAI9C,iBAAiB,IAAI,IAAzB,EAA+B;AAC7BA,MAAAA,iBAAiB,GAAG,EAApB;AACD,KAFD,MAEO;AACLV,MAAAA,MAAM,CAAC0D,IAAP,CAAYhD,iBAAZ,EAA+BqC,OAA/B,CAAuC,UAAUlC,GAAV,EAAe;AACpD,eAAO,OAAOH,iBAAiB,CAACG,GAAD,CAA/B;AACD,OAFD;AAGD;;AAED,QAAI8C,kBAAkB,GAAGC,OAAO,CAACC,GAAR,CAAYC,cAArC;AACA,QAAIC,0BAA0B,GAAGH,OAAO,CAACC,GAAR,CAAYG,sBAA7C;AACA,QAAIC,oBAAoB,GAAGL,OAAO,CAACC,GAAR,CAAYI,oBAAvC;;AAEA,QAAIN,kBAAkB,IAAI,CAACA,kBAAkB,CAACO,WAAnB,GAAiCC,UAAjC,CAA4C,eAA5C,CAA3B,EAAyF;AACvF,YAAM,IAAIC,KAAJ,CAAU,wEAAV,CAAN;AACD;;AACD,QAAIL,0BAA0B,IAAI,CAACA,0BAA0B,CAACG,WAA3B,GAAyCC,UAAzC,CAAoD,YAApD,CAAnC,EAAsG;AACpG,YAAM,IAAIC,KAAJ,CAAU,6EAAV,CAAN;AACD;;AACD,QAAI,CAAC5D,OAAO,CAACyD,oBAAD,CAAZ,EAAoC;AAClCf,MAAAA,sBAAsB,CAAC;AAAEmB,QAAAA,SAAS,EAAEJ;AAAb,OAAD,EAAsCvD,iBAAtC,CAAtB;AACD;;AAED,KAACiD,kBAAD,EAAqBI,0BAArB,EAAiDhB,OAAjD,CAAyD,UAAUJ,OAAV,EAAmB;AAC1E,UAAIA,OAAJ,EAAa;AACX,YAAIQ,YAAY,GAAG5B,+BAA+B,CAACoB,OAAD,CAAlD;AACAO,QAAAA,sBAAsB,CAACC,YAAD,EAAezC,iBAAf,CAAtB,CAFW,CAGX;AACA;;AACAgC,QAAAA,+BAA+B,CAACC,OAAD,EAAUjC,iBAAV,CAA/B;AACD;AACF,KARD;AASD;;AACD,MAAI,CAACH,WAAW,CAACkD,SAAD,CAAhB,EAA6B;AAC3B/C,IAAAA,iBAAiB,CAAC8C,UAAD,CAAjB,GAAgCC,SAAhC;AACD,GAFD,MAEO,IAAInD,QAAQ,CAACkD,UAAD,CAAZ,EAA0B;AAC/B,WAAO9C,iBAAiB,CAAC8C,UAAD,CAAxB;AACD,GAFM,MAEA,IAAInD,QAAQ,CAACmD,UAAD,CAAZ,EAA0B;AAC/BpD,IAAAA,MAAM,CAACM,iBAAD,EAAoB8C,UAApB,CAAN;AACD;;AACD,SAAO9C,iBAAP;AACD,CA1CD","sourcesContent":["\"use strict\";\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n/**\n * Assign a value to a nested object\n * @function putNestedValue\n * @param params the parent object - this argument will be modified!\n * @param key key in the form nested[innerkey]\n * @param value the value to assign\n * @return the modified params object\n */\nvar url = require('url');\nvar extend = require(\"lodash/extend\");\nvar isObject = require(\"lodash/isObject\");\nvar isString = require(\"lodash/isString\");\nvar isUndefined = require(\"lodash/isUndefined\");\nvar isEmpty = require(\"lodash/isEmpty\");\nvar entries = require('./utils/entries');\n\nvar cloudinary_config = void 0;\n\n/**\n * Sets a value in an object using a nested key\n * @param {object} params The object to assign the value in.\n * @param {string} key The key of the value. A period is used to denote inner keys.\n * @param {*} value The value to set.\n * @returns {object} The params argument.\n * @example\n *     let o = {foo: {bar: 1}};\n *     putNestedValue(o, 'foo.bar', 2); // {foo: {bar: 2}}\n *     putNestedValue(o, 'foo.inner.key', 'this creates an inner object');\n *     // {{foo: {bar: 2}, inner: {key: 'this creates an inner object'}}}\n */\nfunction putNestedValue(params, key, value) {\n  var chain = key.split(/[\\[\\]]+/).filter(function (i) {\n    return i.length;\n  });\n  var outer = params;\n  var lastKey = chain.pop();\n  for (var j = 0; j < chain.length; j++) {\n    var innerKey = chain[j];\n    var inner = outer[innerKey];\n    if (inner == null) {\n      inner = {};\n      outer[innerKey] = inner;\n    }\n    outer = inner;\n  }\n  outer[lastKey] = value;\n  return params;\n}\n\nfunction parseCloudinaryConfigFromEnvURL(ENV_STR) {\n  var conf = {};\n\n  var uri = url.parse(ENV_STR, true);\n\n  if (uri.protocol === 'cloudinary:') {\n    conf = Object.assign({}, conf, {\n      cloud_name: uri.host,\n      api_key: uri.auth && uri.auth.split(\":\")[0],\n      api_secret: uri.auth && uri.auth.split(\":\")[1],\n      private_cdn: uri.pathname != null,\n      secure_distribution: uri.pathname && uri.pathname.substring(1)\n    });\n  } else if (uri.protocol === 'account:') {\n    conf = Object.assign({}, conf, {\n      account_id: uri.host,\n      provisioning_api_key: uri.auth && uri.auth.split(\":\")[0],\n      provisioning_api_secret: uri.auth && uri.auth.split(\":\")[1]\n    });\n  }\n\n  return conf;\n}\n\nfunction extendCloudinaryConfigFromQuery(ENV_URL) {\n  var confToExtend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var uri = url.parse(ENV_URL, true);\n  if (uri.query != null) {\n    entries(uri.query).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      return putNestedValue(confToExtend, key, value);\n    });\n  }\n}\n\nfunction extendCloudinaryConfig(parsedConfig) {\n  var confToExtend = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  entries(parsedConfig).forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    if (value !== undefined) {\n      confToExtend[key] = value;\n    }\n  });\n\n  return confToExtend;\n}\n\nmodule.exports = function (new_config, new_value) {\n  if (cloudinary_config == null || new_config === true) {\n    if (cloudinary_config == null) {\n      cloudinary_config = {};\n    } else {\n      Object.keys(cloudinary_config).forEach(function (key) {\n        return delete cloudinary_config[key];\n      });\n    }\n\n    var CLOUDINARY_ENV_URL = process.env.CLOUDINARY_URL;\n    var CLOUDINARY_ENV_ACCOUNT_URL = process.env.CLOUDINARY_ACCOUNT_URL;\n    var CLOUDINARY_API_PROXY = process.env.CLOUDINARY_API_PROXY;\n\n    if (CLOUDINARY_ENV_URL && !CLOUDINARY_ENV_URL.toLowerCase().startsWith('cloudinary://')) {\n      throw new Error(\"Invalid CLOUDINARY_URL protocol. URL should begin with 'cloudinary://'\");\n    }\n    if (CLOUDINARY_ENV_ACCOUNT_URL && !CLOUDINARY_ENV_ACCOUNT_URL.toLowerCase().startsWith('account://')) {\n      throw new Error(\"Invalid CLOUDINARY_ACCOUNT_URL protocol. URL should begin with 'account://'\");\n    }\n    if (!isEmpty(CLOUDINARY_API_PROXY)) {\n      extendCloudinaryConfig({ api_proxy: CLOUDINARY_API_PROXY }, cloudinary_config);\n    }\n\n    [CLOUDINARY_ENV_URL, CLOUDINARY_ENV_ACCOUNT_URL].forEach(function (ENV_URL) {\n      if (ENV_URL) {\n        var parsedConfig = parseCloudinaryConfigFromEnvURL(ENV_URL);\n        extendCloudinaryConfig(parsedConfig, cloudinary_config);\n        // Provide Query support in ENV url cloudinary://key:secret@test123?foo[bar]=value\n        // expect(cloudinary_config.foo.bar).to.eql('value')\n        extendCloudinaryConfigFromQuery(ENV_URL, cloudinary_config);\n      }\n    });\n  }\n  if (!isUndefined(new_value)) {\n    cloudinary_config[new_config] = new_value;\n  } else if (isString(new_config)) {\n    return cloudinary_config[new_config];\n  } else if (isObject(new_config)) {\n    extend(cloudinary_config, new_config);\n  }\n  return cloudinary_config;\n};"]},"metadata":{},"sourceType":"script"}